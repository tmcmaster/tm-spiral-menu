define(["exports","../../d3-array/index.js","../../d3-interpolate/index.js","../../d3-time/index.js","../../d3-time-format/index.js","./array.js","./continuous.js","./nice.js"],function(_exports,_index,_index2,_index3,_index4,_array,_continuous,_nice){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.calendar=calendar;_exports.default=function(){return calendar(_index3.timeYear,_index3.timeMonth,_index3.timeWeek,_index3.timeDay,_index3.timeHour,_index3.timeMinute,_index3.timeSecond,_index3.timeMillisecond,_index4.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};_continuous=babelHelpers.interopRequireWildcard(_continuous);_nice=babelHelpers.interopRequireDefault(_nice);var durationSecond=1e3,durationMinute=60*durationSecond,durationHour=60*durationMinute,durationDay=24*durationHour,durationMonth=30*durationDay,durationYear=365*durationDay;function date(t){return new Date(t)}function number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(year,month,week,day,hour,minute,second,millisecond,format){var scale=(0,_continuous.default)(_continuous.deinterpolateLinear,_index2.interpolateNumber),invert=scale.invert,domain=scale.domain,formatMillisecond=format(".%L"),formatSecond=format(":%S"),formatMinute=format("%I:%M"),formatHour=format("%I %p"),formatDay=format("%a %d"),formatWeek=format("%b %d"),formatMonth=format("%B"),formatYear=format("%Y"),tickIntervals=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[minute,1,durationMinute],[minute,5,5*durationMinute],[minute,15,15*durationMinute],[minute,30,30*durationMinute],[hour,1,durationHour],[hour,3,3*durationHour],[hour,6,6*durationHour],[hour,12,12*durationHour],[day,1,durationDay],[day,2,2*durationDay],[week,1,7*durationDay],[month,1,durationMonth],[month,3,3*durationMonth],[year,1,durationYear]];function tickFormat(date){return(second(date)<date?formatMillisecond:minute(date)<date?formatSecond:hour(date)<date?formatMinute:day(date)<date?formatHour:month(date)<date?week(date)<date?formatDay:formatWeek:year(date)<date?formatMonth:formatYear)(date)}function tickInterval(interval,start,stop,step){if(null==interval)interval=10;if("number"===typeof interval){var target=Math.abs(stop-start)/interval,i=(0,_index.bisector)(function(i){return i[2]}).right(tickIntervals,target);if(i===tickIntervals.length){step=(0,_index.tickStep)(start/durationYear,stop/durationYear,interval);interval=year}else if(i){i=tickIntervals[target/tickIntervals[i-1][2]<tickIntervals[i][2]/target?i-1:i];step=i[1];interval=i[0]}else{step=(0,_index.tickStep)(start,stop,interval);interval=millisecond}}return null==step?interval:interval.every(step)}scale.invert=function(y){return new Date(invert(y))};scale.domain=function(_){return arguments.length?domain(_array.map.call(_,number)):domain().map(date)};scale.ticks=function(interval,step){var d=domain(),t0=d[0],t1=d[d.length-1],r=t1<t0,t;if(r)t=t0,t0=t1,t1=t;t=tickInterval(interval,t0,t1,step);t=t?t.range(t0,t1+1):[];return r?t.reverse():t};scale.tickFormat=function(count,specifier){return null==specifier?tickFormat:format(specifier)};scale.nice=function(interval,step){var d=domain();return(interval=tickInterval(interval,d[0],d[d.length-1],step))?domain((0,_nice.default)(d,interval)):scale};scale.copy=function(){return(0,_continuous.copy)(scale,calendar(year,month,week,day,hour,minute,second,millisecond,format))};return scale}});