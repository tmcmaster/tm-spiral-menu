define(["exports","../../d3-array/index.js","../../d3-format/index.js","./constant.js","./nice.js","./continuous.js"],function(_exports,_index,_index2,_constant,_nice,_continuous){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=log;_constant=babelHelpers.interopRequireDefault(_constant);_nice=babelHelpers.interopRequireDefault(_nice);_continuous=babelHelpers.interopRequireWildcard(_continuous);var _MathE=Math.E,_Mathpow=Math.pow,_Mathlog=Math.log;function deinterpolate(a,b){return(b=_Mathlog(b/a))?function(x){return _Mathlog(x/a)/b}:(0,_constant.default)(b)}function reinterpolate(a,b){return 0>a?function(t){return-_Mathpow(-b,t)*_Mathpow(-a,1-t)}:function(t){return _Mathpow(b,t)*_Mathpow(a,1-t)}}function pow10(x){return isFinite(x)?+("1e"+x):0>x?0:x}function powp(base){return 10===base?pow10:base===_MathE?Math.exp:function(x){return _Mathpow(base,x)}}function logp(base){return base===_MathE?_Mathlog:10===base&&Math.log10||2===base&&Math.log2||(base=_Mathlog(base),function(x){return _Mathlog(x)/base})}function reflect(f){return function(x){return-f(-x)}}function log(){var _Mathround=Math.round,scale=(0,_continuous.default)(deinterpolate,reinterpolate).domain([1,10]),domain=scale.domain,base=10,logs=logp(10),pows=powp(10);function rescale(){logs=logp(base),pows=powp(base);if(0>domain()[0])logs=reflect(logs),pows=reflect(pows);return scale}scale.base=function(_){return arguments.length?(base=+_,rescale()):base};scale.domain=function(_){return arguments.length?(domain(_),rescale()):domain()};scale.ticks=function(count){var d=domain(),u=d[0],v=d[d.length-1],r;if(r=v<u)i=u,u=v,v=i;var i=logs(u),j=logs(v),p,k,t,n=null==count?10:+count,z=[];if(!(base%1)&&j-i<n){i=_Mathround(i)-1,j=_Mathround(j)+1;if(0<u)for(;i<j;++i){for(k=1,p=pows(i);k<base;++k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}else for(;i<j;++i){for(k=base-1,p=pows(i);1<=k;--k){t=p*k;if(t<u)continue;if(t>v)break;z.push(t)}}}else{z=(0,_index.ticks)(i,j,Math.min(j-i,n)).map(pows)}return r?z.reverse():z};scale.tickFormat=function(count,specifier){if(null==specifier)specifier=10===base?".0e":",";if("function"!==typeof specifier)specifier=(0,_index2.format)(specifier);if(count===1/0)return specifier;if(null==count)count=10;var k=Math.max(1,base*count/scale.ticks().length);return function(d){var i=d/pows(_Mathround(logs(d)));if(i*base<base-.5)i*=base;return i<=k?specifier(d):""}};scale.nice=function(){return domain((0,_nice.default)(domain(),{floor:function(x){return pows(Math.floor(logs(x)))},ceil:function(x){return pows(Math.ceil(logs(x)))}}))};scale.copy=function(){return(0,_continuous.copy)(scale,log().base(base))};return scale}});