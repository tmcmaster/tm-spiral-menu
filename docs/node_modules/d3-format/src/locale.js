define(["exports","./exponent.js","./formatGroup.js","./formatSpecifier.js","./formatTypes.js","./formatPrefixAuto.js"],function(_exports,_exponent,_formatGroup,_formatSpecifier,_formatTypes,_formatPrefixAuto){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=_default;_exponent=babelHelpers.interopRequireDefault(_exponent);_formatGroup=babelHelpers.interopRequireDefault(_formatGroup);_formatSpecifier=babelHelpers.interopRequireDefault(_formatSpecifier);_formatTypes=babelHelpers.interopRequireDefault(_formatTypes);var prefixes=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function identity(x){return x}function _default(locale){var _Mathmax=Math.max,_Mathmin=Math.min,group=locale.grouping&&locale.thousands?(0,_formatGroup.default)(locale.grouping,locale.thousands):identity,currency=locale.currency,decimal=locale.decimal;function newFormat(specifier){specifier=(0,_formatSpecifier.default)(specifier);var fill=specifier.fill,align=specifier.align,sign=specifier.sign,symbol=specifier.symbol,zero=specifier.zero,width=specifier.width,comma=specifier.comma,precision=specifier.precision,type=specifier.type,prefix="$"===symbol?currency[0]:"#"===symbol&&/[boxX]/.test(type)?"0"+type.toLowerCase():"",suffix="$"===symbol?currency[1]:/[%p]/.test(type)?"%":"",formatType=_formatTypes.default[type],maybeSuffix=!type||/[defgprs%]/.test(type);precision=null==precision?type?6:12:/[gprs]/.test(type)?_Mathmax(1,_Mathmin(21,precision)):_Mathmax(0,_Mathmin(20,precision));function format(value){var valuePrefix=prefix,valueSuffix=suffix,i,n,c;if("c"===type){valueSuffix=formatType(value)+valueSuffix;value=""}else{value=+value;var valueNegative=(0>value||0>1/value)&&(value*=-1,!0);value=formatType(value,precision);if(valueNegative){i=-1,n=value.length;valueNegative=!1;while(++i<n){if(c=value.charCodeAt(i),48<c&&58>c||"x"===type&&96<c&&103>c||"X"===type&&64<c&&71>c){valueNegative=!0;break}}}valuePrefix=(valueNegative?"("===sign?sign:"-":"-"===sign||"("===sign?"":sign)+valuePrefix;valueSuffix=valueSuffix+("s"===type?prefixes[8+_formatPrefixAuto.prefixExponent/3]:"")+(valueNegative&&"("===sign?")":"");if(maybeSuffix){i=-1,n=value.length;while(++i<n){if(c=value.charCodeAt(i),48>c||57<c){valueSuffix=(46===c?decimal+value.slice(i+1):value.slice(i))+valueSuffix;value=value.slice(0,i);break}}}}if(comma&&!zero)value=group(value,1/0);var length=valuePrefix.length+value.length+valueSuffix.length,padding=length<width?Array(width-length+1).join(fill):"";if(comma&&zero)value=group(padding+value,padding.length?width-valueSuffix.length:1/0),padding="";switch(align){case"<":return valuePrefix+value+valueSuffix+padding;case"=":return valuePrefix+padding+value+valueSuffix;case"^":return padding.slice(0,length=padding.length>>1)+valuePrefix+value+valueSuffix+padding.slice(length);}return padding+valuePrefix+value+valueSuffix}format.toString=function(){return specifier+""};return format}function formatPrefix(specifier,value){var f=newFormat((specifier=(0,_formatSpecifier.default)(specifier),specifier.type="f",specifier)),e=3*_Mathmax(-8,_Mathmin(8,Math.floor((0,_exponent.default)(value)/3))),k=Math.pow(10,-e),prefix=prefixes[8+e/3];return function(value){return f(k*value)+prefix}}return{format:newFormat,formatPrefix:formatPrefix}}});