define(["exports","./schedule.js"],function(_exports,_schedule){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.default=function(name,listener){var id=this._id;return 2>arguments.length?(0,_schedule.get)(this.node(),id).on.on(name):this.each(onFunction(id,name,listener))};function start(name){return(name+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");if(0<=i)t=t.slice(0,i);return!t||"start"===t})}function onFunction(id,name,listener){var on0,on1,sit=start(name)?_schedule.init:_schedule.set;return function(){var schedule=sit(this,id),on=schedule.on;if(on!==on0)(on1=(on0=on).copy()).on(name,listener);schedule.on=on1}}});